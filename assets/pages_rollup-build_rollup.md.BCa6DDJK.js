import{_ as i,c as a,o as t,ag as e}from"./chunks/framework.By2cXeI6.js";const c=JSON.parse('{"title":"使用 rollup 打包 ts 并发布工具包","description":"","frontmatter":{},"headers":[],"relativePath":"pages/rollup-build/rollup.md","filePath":"pages/rollup-build/rollup.md"}'),n={name:"pages/rollup-build/rollup.md"};function p(l,s,o,h,r,k){return t(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="使用-rollup-打包-ts-并发布工具包" tabindex="-1">使用 rollup 打包 ts 并发布工具包 <a class="header-anchor" href="#使用-rollup-打包-ts-并发布工具包" aria-label="Permalink to &quot;使用 rollup 打包 ts 并发布工具包&quot;">​</a></h1><h2 id="_1-创建-gitignore文件" tabindex="-1">1. 创建 <code>.gitignore</code>文件 <a class="header-anchor" href="#_1-创建-gitignore文件" aria-label="Permalink to &quot;1. 创建 \`.gitignore\`文件&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title"><code>touch 文件名称</code>:创建文件，<code>mkdir 文件夹名称</code>:创建文件夹</p><p><strong>1. <code>touch .gitignore</code></strong></p><ol><li>会创建一个空文件，</li><li>或者如果文件确实存在，会将上次修改的时间更新为&quot;now“。</li></ol><p><strong>2.<code>mkdir src</code></strong>: 创建<code>src文件夹</code></p></div><h2 id="_2-初始化文件" tabindex="-1">2. 初始化文件 <a class="header-anchor" href="#_2-初始化文件" aria-label="Permalink to &quot;2. 初始化文件&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><ol><li><p>初始化<code>package.json</code>文件：<code>pnpm init</code>、<code>npm init -y</code></p></li><li><p>初始化<code>typescript.json</code>文件：<code>tsc --init</code>(确定已安装 tsc)</p><p>-- <code>tsc -v</code> :查看版本号，</p><p>-- <code>npm i -g typescript</code>：安装 tsc</p></li></ol></div><h2 id="_3-package-json文件配置文件" tabindex="-1">3.<code>package.json</code>文件配置文件 <a class="header-anchor" href="#_3-package-json文件配置文件" aria-label="Permalink to &quot;3.\`package.json\`文件配置文件&quot;">​</a></h2><details class="details custom-block"><summary>Details</summary><p><code>name</code>：包名； <code>decription</code>：包的描述，在 npm 搜索里会用到，如果没有提供，会从 <code>README.md</code> 中提取； <code>main</code>：包的入口文件，通常是 <code>CommonJS</code>，历史原因。这里我们写上 <code>./dist/mid-index-of.common.js</code>； <code>browser</code>：包用于浏览器时的入口文件； <code>module</code>：指定 ES 模块入口，这个不是 npm 自己的字段，是给打包工具用的。这里我们写上 <code>./dist/mid-index-of.esm.js</code>； <code>types</code>：指定包的类型文件。这里我们写上<code>./dist/index.d.ts</code>； <code>keywords</code>：关键字数组，npm 搜索会用到，建议多写一点； <code>private</code>：是否为私有包，这个字段设置为 true 可以防止意外将私有包发布出去； <code>liscense</code>：开源许可证，常用 MIT； <code>files</code>：指定可以被发布的文件，默认是所有文件。为了减少包体积，不加上多余的文件，这个是一定要配置的。此外一些文件是一定会带上的，比如 <code>package.json</code>、<code>LICENSE</code>、<code>README.md</code>； <code>sideEffects</code>：包是否有副作用，比如注入全局变量。如果没副作用，设置为 false，可以帮助打包工具做 tree-shaking，将一些引入了但没有使用的包移除；</p></details><h2 id="_4-前端模块化" tabindex="-1">4. 前端模块化 <a class="header-anchor" href="#_4-前端模块化" aria-label="Permalink to &quot;4. 前端模块化&quot;">​</a></h2><p><strong>前端模块化</strong>：就是将独立的功能代码封装成一个独立的文件，其他模块需要使用，在进行引用。</p><p>模块化就是将一个复杂的程序依据一定的规则或者说是规范，将其封装成几个单独的块（这里的块指的就是文件），在使用的时候将其组合在一起</p><p><strong>模块化有利于代码的拆分和架构上的解耦</strong>，模块化在服务端领域已经早已成熟，nodejs 也已经支持模块化。</p><p>而在浏览器上，js 脚本是异步载入的，脚本按照编码顺序依次执行，依赖关系只能按照编码顺序来控制。因此前端早早就有了模块化技术。</p><p><strong>遵循规范</strong> require 是 AMD 规范引入方式 import 是 es6 的一个语法标准，如果要兼容浏览器的话必须转化成 es5 的语法</p><p><strong>调用时间</strong> require 是运行时调用，所以 require 理论上可以运用在代码的任何地方 import 是编译时调用，所以必须放在文件开头</p><p><strong>本质</strong> require 是赋值过程，其实 require 的结果就是对象、数字、字符串、函数等，再把 require 的结果赋值给某个变量</p><p>import 是解构过程，但是目前所有的引擎都还没有实现 import，我们在 node 中使用 babel 支持 ES6，也仅仅是将 ES6 转码为 ES5 再执行，import 语法会被转码为 require</p><p><strong>require / exports 的区别</strong></p><ol><li><p>遵循 CommonJS/AMD，<strong>只能在运行时确定模块的依赖关系及输入/输出的变量，无法进行静态优化。</strong></p><p>用法只有以下三种简单的写法：</p></li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> / export</span></span></code></pre></div><ol start="2"><li>遵循 ES6 规范，<strong>支持编译时静态分析，便于 JS 引入宏和类型检验。动态绑定。</strong></li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> read } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs, { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readFile</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {readFile, read}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;fs&#39;</span></span></code></pre></div><p>通过 require 引入<strong>基础数据类型</strong>时，属于<strong>复制该变量</strong>。 通过 require 引入<strong>复杂数据类型</strong>时，<strong>数据浅拷贝该对象</strong>。 出现模块之间的循环引用时，会输出已经执行的模块，而未执行的模块不输出（比较复杂） <strong><code>CommonJS</code>模块默认<code>export</code>的是一个对象，即使导出的是基础数据类型</strong></p><p><strong>require</strong>：运行时加载，CommonJS/AMD，社区方案，提供了服务器/浏览器的模块加载方案。非语言层面的标准。<strong>只能在运行时确定模块的依赖关系及输入/输出的变量，无法进行静态优化。</strong><strong>import</strong>：编译时加载，ESMAScript6+，语言规格层面支持模块功能。<strong>支持编译时静态分析，便于 JS 引入宏和类型检验。动态绑定。</strong></p>`,24)])])}const g=i(n,[["render",p]]);export{c as __pageData,g as default};
