import{_ as z,aj as O,p as S,c as M,o as N,F as L,B as R,j as T,N as $,n as U,G as X,ag as H,a as V}from"./chunks/framework.By2cXeI6.js";(function(m,_){typeof exports=="object"&&typeof module<"u"?module.exports=_():typeof define=="function"&&define.amd?define(_):(m||(typeof globalThis<"u"?globalThis:this)).ColorThief=_()})(typeof globalThis<"u"?globalThis:void 0,function(){if(!m)var m={map:function(h,l){var y={};return l?h.map(function(o,E){return y.index=E,l.call(y,o)}):h.slice()},naturalOrder:function(h,l){return h<l?-1:h>l?1:0},sum:function(h,l){var y={};return h.reduce(l?function(o,E,u){return y.index=u,o+l.call(y,E)}:function(o,E){return o+E},0)},max:function(h,l){return Math.max.apply(null,l?m.map(h,l):h)}};var _=function(){var h=5,l=8-h,y=1e3;function o(a,s,e){return(a<<2*h)+(s<<h)+e}function E(a){var s=[],e=!1;function r(){s.sort(a),e=!0}return{push:function(t){s.push(t),e=!1},peek:function(t){return e||r(),t===void 0&&(t=s.length-1),s[t]},pop:function(){return e||r(),s.pop()},size:function(){return s.length},map:function(t){return s.map(t)},debug:function(){return e||r(),s}}}function u(a,s,e,r,t,n,d){var p=this;p.r1=a,p.r2=s,p.g1=e,p.g2=r,p.b1=t,p.b2=n,p.histo=d}function f(){this.vboxes=new E(function(a,s){return m.naturalOrder(a.vbox.count()*a.vbox.volume(),s.vbox.count()*s.vbox.volume())})}function C(a,s){if(s.count()){var e=s.r2-s.r1+1,r=s.g2-s.g1+1,t=m.max([e,r,s.b2-s.b1+1]);if(s.count()==1)return[s.copy()];var n,d,p,k,c=0,g=[],F=[];if(t==e)for(n=s.r1;n<=s.r2;n++){for(k=0,d=s.g1;d<=s.g2;d++)for(p=s.b1;p<=s.b2;p++)k+=a[o(n,d,p)]||0;g[n]=c+=k}else if(t==r)for(n=s.g1;n<=s.g2;n++){for(k=0,d=s.r1;d<=s.r2;d++)for(p=s.b1;p<=s.b2;p++)k+=a[o(d,n,p)]||0;g[n]=c+=k}else for(n=s.b1;n<=s.b2;n++){for(k=0,d=s.r1;d<=s.r2;d++)for(p=s.g1;p<=s.g2;p++)k+=a[o(d,p,n)]||0;g[n]=c+=k}return g.forEach(function(v,A){F[A]=c-v}),function(v){var A,x,D,P,B,j=v+"1",w=v+"2",I=0;for(n=s[j];n<=s[w];n++)if(g[n]>c/2){for(D=s.copy(),P=s.copy(),B=(A=n-s[j])<=(x=s[w]-n)?Math.min(s[w]-1,~~(n+x/2)):Math.max(s[j],~~(n-1-A/2));!g[B];)B++;for(I=F[B];!I&&g[B-1];)I=F[--B];return D[w]=B,P[j]=D[w]+1,[D,P]}}(t==e?"r":t==r?"g":"b")}}return u.prototype={volume:function(a){var s=this;return s._volume&&!a||(s._volume=(s.r2-s.r1+1)*(s.g2-s.g1+1)*(s.b2-s.b1+1)),s._volume},count:function(a){var s=this,e=s.histo;if(!s._count_set||a){var r,t,n,d=0;for(r=s.r1;r<=s.r2;r++)for(t=s.g1;t<=s.g2;t++)for(n=s.b1;n<=s.b2;n++)d+=e[o(r,t,n)]||0;s._count=d,s._count_set=!0}return s._count},copy:function(){var a=this;return new u(a.r1,a.r2,a.g1,a.g2,a.b1,a.b2,a.histo)},avg:function(a){var s=this,e=s.histo;if(!s._avg||a){var r,t,n,d,p=0,k=1<<8-h,c=0,g=0,F=0;for(t=s.r1;t<=s.r2;t++)for(n=s.g1;n<=s.g2;n++)for(d=s.b1;d<=s.b2;d++)p+=r=e[o(t,n,d)]||0,c+=r*(t+.5)*k,g+=r*(n+.5)*k,F+=r*(d+.5)*k;s._avg=p?[~~(c/p),~~(g/p),~~(F/p)]:[~~(k*(s.r1+s.r2+1)/2),~~(k*(s.g1+s.g2+1)/2),~~(k*(s.b1+s.b2+1)/2)]}return s._avg},contains:function(a){var s=this,e=a[0]>>l;return gval=a[1]>>l,bval=a[2]>>l,e>=s.r1&&e<=s.r2&&gval>=s.g1&&gval<=s.g2&&bval>=s.b1&&bval<=s.b2}},f.prototype={push:function(a){this.vboxes.push({vbox:a,color:a.avg()})},palette:function(){return this.vboxes.map(function(a){return a.color})},size:function(){return this.vboxes.size()},map:function(a){for(var s=this.vboxes,e=0;e<s.size();e++)if(s.peek(e).vbox.contains(a))return s.peek(e).color;return this.nearest(a)},nearest:function(a){for(var s,e,r,t=this.vboxes,n=0;n<t.size();n++)((e=Math.sqrt(Math.pow(a[0]-t.peek(n).color[0],2)+Math.pow(a[1]-t.peek(n).color[1],2)+Math.pow(a[2]-t.peek(n).color[2],2)))<s||s===void 0)&&(s=e,r=t.peek(n).color);return r},forcebw:function(){var a=this.vboxes;a.sort(function(t,n){return m.naturalOrder(m.sum(t.color),m.sum(n.color))});var s=a[0].color;s[0]<5&&s[1]<5&&s[2]<5&&(a[0].color=[0,0,0]);var e=a.length-1,r=a[e].color;r[0]>251&&r[1]>251&&r[2]>251&&(a[e].color=[255,255,255])}},{quantize:function(a,s){if(!a.length||s<2||s>256)return!1;var e=function(k){var c,g=new Array(1<<3*h);return k.forEach(function(F){c=o(F[0]>>l,F[1]>>l,F[2]>>l),g[c]=(g[c]||0)+1}),g}(a);e.forEach(function(){});var r=function(k,c){var g,F,v,A=1e6,x=0,D=1e6,P=0,B=1e6,j=0;return k.forEach(function(w){(g=w[0]>>l)<A?A=g:g>x&&(x=g),(F=w[1]>>l)<D?D=F:F>P&&(P=F),(v=w[2]>>l)<B?B=v:v>j&&(j=v)}),new u(A,x,D,P,B,j,c)}(a,e),t=new E(function(k,c){return m.naturalOrder(k.count(),c.count())});function n(k,c){for(var g,F=k.size(),v=0;v<y;){if(F>=c||v++>y)return;if((g=k.pop()).count()){var A=C(e,g),x=A[0],D=A[1];if(!x)return;k.push(x),D&&(k.push(D),F++)}else k.push(g),v++}}t.push(r),n(t,.75*s);for(var d=new E(function(k,c){return m.naturalOrder(k.count()*k.volume(),c.count()*c.volume())});t.size();)d.push(t.pop());n(d,s);for(var p=new f;d.size();)p.push(d.pop());return p}}}().quantize,b=function(h){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=h.naturalWidth,this.height=this.canvas.height=h.naturalHeight,this.context.drawImage(h,0,0,this.width,this.height)};b.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var q=function(){};return q.prototype.getColor=function(h,l){return l===void 0&&(l=10),this.getPalette(h,5,l)[0]},q.prototype.getPalette=function(h,l,y){var o=function(C){var a=C.colorCount,s=C.quality;if(a!==void 0&&Number.isInteger(a)){if(a===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");a=Math.max(a,2),a=Math.min(a,20)}else a=10;return(s===void 0||!Number.isInteger(s)||s<1)&&(s=10),{colorCount:a,quality:s}}({colorCount:l,quality:y}),E=new b(h),u=function(C,a,s){for(var e,r,t,n,d,p=C,k=[],c=0;c<a;c+=s)r=p[0+(e=4*c)],t=p[e+1],n=p[e+2],((d=p[e+3])===void 0||d>=125)&&(r>250&&t>250&&n>250||k.push([r,t,n]));return k}(E.getImageData().data,E.width*E.height,o.quality),f=_(u,o.colorCount);return f?f.palette():null},q.prototype.getColorFromUrl=function(h,l,y){var o=this,E=document.createElement("img");E.addEventListener("load",function(){var u=o.getPalette(E,5,y);l(u[0],h)}),E.src=h},q.prototype.getImageData=function(h,l){var y=new XMLHttpRequest;y.open("GET",h,!0),y.responseType="arraybuffer",y.onload=function(){if(this.status==200){var o=new Uint8Array(this.response);i=o.length;for(var E=new Array(i),u=0;u<o.length;u++)E[u]=String.fromCharCode(o[u]);var f=E.join(""),C=window.btoa(f);l("data:image/png;base64,"+C)}},y.send()},q.prototype.getColorAsync=function(h,l,y){var o=this;this.getImageData(h,function(E){var u=document.createElement("img");u.addEventListener("load",function(){var f=o.getPalette(u,5,y);l(f[0],this)}),u.src=E})},q});const J={class:"grid"},G={class:"item"},W=["src","onMouseenter"],K={__name:"bgFollowImg",setup(m){O(o=>({v765f308a:q.value}));const _=[];for(let o=0;o<4;o++)_.push(`https://picsum.photos/200?r=${o}`);const b=new ColorThief,q=S("#fff"),h=S(-1),l=async(o,E)=>{h.value=E;const u=await b.getPalette(o.target,3),[f,C,a]=u.map(s=>`rgb(${s[0]},${s[1]},${s[2]})`);q.value=`${f},${C},${a}`},y=()=>{h.value=-1,q.value="#fff"};return(o,E)=>(N(),M("div",J,[(N(),M(L,null,R(_,(u,f)=>T("div",G,[T("img",{crossorigin:"anonymous",src:u,onMouseenter:C=>l(C,f),onMouseleave:y,class:U([h.value===f?"hoverImg":""]),style:$({opacity:h.value===-1||f===h.value?1:.2,transition:".3s"})},null,46,W)])),64))]))}},Q=z(K,[["__scopeId","data-v-baada94d"]]),ss=JSON.parse('{"title":"系列一 —— 杂七杂八","description":"","frontmatter":{},"headers":[],"relativePath":"pages/lotsOfDifferent/demo1/index.md","filePath":"pages/lotsOfDifferent/demo1/index.md"}'),Y={name:"pages/lotsOfDifferent/demo1/index.md"},is=Object.assign(Y,{setup(m){return(_,b)=>(N(),M("div",null,[b[0]||(b[0]=T("h1",{id:"系列一-——-杂七杂八",tabindex:"-1"},[V("系列一 —— 杂七杂八 "),T("a",{class:"header-anchor",href:"#系列一-——-杂七杂八","aria-label":'Permalink to "系列一 —— 杂七杂八"'},"​")],-1)),b[1]||(b[1]=T("h2",{id:"_1-跟随图片变化的背景色",tabindex:"-1"},[V("1. 跟随图片变化的背景色 "),T("a",{class:"header-anchor",href:"#_1-跟随图片变化的背景色","aria-label":'Permalink to "1. 跟随图片变化的背景色"'},"​")],-1)),b[2]||(b[2]=T("p",null,"通过 cdn 引入第三方包的方式，在打包时因为 ESM 不支持，所以需要将文件下载下来引入",-1)),X(Q),b[3]||(b[3]=H("",41))]))}});export{ss as __pageData,is as default};
