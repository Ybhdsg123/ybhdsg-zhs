import{_ as S,l as V,e as N,o as $,c as j,F as B,r as H,b as M,n as L,m as R,g as U,j as O,a as G}from"./app.e6a24019.js";(function(b,T){typeof exports=="object"&&typeof module<"u"?module.exports=T():typeof define=="function"&&define.amd?define(T):(b||self).ColorThief=T()})(globalThis,function(){if(!b)var b={map:function(s,a){var m={};return a?s.map(function(p,h){return m.index=h,a.call(m,p)}):s.slice()},naturalOrder:function(s,a){return s<a?-1:s>a?1:0},sum:function(s,a){var m={};return s.reduce(a?function(p,h,g){return m.index=g,p+a.call(m,h)}:function(p,h){return p+h},0)},max:function(s,a){return Math.max.apply(null,a?b.map(s,a):s)}};var T=function(){var s=5,a=8-s,m=1e3;function p(e,o,r){return(e<<2*s)+(o<<s)+r}function h(e){var o=[],r=!1;function u(){o.sort(e),r=!0}return{push:function(n){o.push(n),r=!1},peek:function(n){return r||u(),n===void 0&&(n=o.length-1),o[n]},pop:function(){return r||u(),o.pop()},size:function(){return o.length},map:function(n){return o.map(n)},debug:function(){return r||u(),o}}}function g(e,o,r,u,n,t,f){var l=this;l.r1=e,l.r2=o,l.g1=r,l.g2=u,l.b1=n,l.b2=t,l.histo=f}function y(){this.vboxes=new h(function(e,o){return b.naturalOrder(e.vbox.count()*e.vbox.volume(),o.vbox.count()*o.vbox.volume())})}function D(e,o){if(o.count()){var r=o.r2-o.r1+1,u=o.g2-o.g1+1,n=b.max([r,u,o.b2-o.b1+1]);if(o.count()==1)return[o.copy()];var t,f,l,c,d=0,v=[],_=[];if(n==r)for(t=o.r1;t<=o.r2;t++){for(c=0,f=o.g1;f<=o.g2;f++)for(l=o.b1;l<=o.b2;l++)c+=e[p(t,f,l)]||0;v[t]=d+=c}else if(n==u)for(t=o.g1;t<=o.g2;t++){for(c=0,f=o.r1;f<=o.r2;f++)for(l=o.b1;l<=o.b2;l++)c+=e[p(f,t,l)]||0;v[t]=d+=c}else for(t=o.b1;t<=o.b2;t++){for(c=0,f=o.r1;f<=o.r2;f++)for(l=o.g1;l<=o.g2;l++)c+=e[p(f,l,t)]||0;v[t]=d+=c}return v.forEach(function(C,A){_[A]=d-C}),function(C){var A,E,F,q,x,k=C+"1",I=C+"2",P=0;for(t=o[k];t<=o[I];t++)if(v[t]>d/2){for(F=o.copy(),q=o.copy(),x=(A=t-o[k])<=(E=o[I]-t)?Math.min(o[I]-1,~~(t+E/2)):Math.max(o[k],~~(t-1-A/2));!v[x];)x++;for(P=_[x];!P&&v[x-1];)P=_[--x];return F[I]=x,q[k]=F[I]+1,[F,q]}}(n==r?"r":n==u?"g":"b")}}return g.prototype={volume:function(e){var o=this;return o._volume&&!e||(o._volume=(o.r2-o.r1+1)*(o.g2-o.g1+1)*(o.b2-o.b1+1)),o._volume},count:function(e){var o=this,r=o.histo;if(!o._count_set||e){var u,n,t,f=0;for(u=o.r1;u<=o.r2;u++)for(n=o.g1;n<=o.g2;n++)for(t=o.b1;t<=o.b2;t++)f+=r[p(u,n,t)]||0;o._count=f,o._count_set=!0}return o._count},copy:function(){var e=this;return new g(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(e){var o=this,r=o.histo;if(!o._avg||e){var u,n,t,f,l=0,c=1<<8-s,d=0,v=0,_=0;for(n=o.r1;n<=o.r2;n++)for(t=o.g1;t<=o.g2;t++)for(f=o.b1;f<=o.b2;f++)l+=u=r[p(n,t,f)]||0,d+=u*(n+.5)*c,v+=u*(t+.5)*c,_+=u*(f+.5)*c;o._avg=l?[~~(d/l),~~(v/l),~~(_/l)]:[~~(c*(o.r1+o.r2+1)/2),~~(c*(o.g1+o.g2+1)/2),~~(c*(o.b1+o.b2+1)/2)]}return o._avg},contains:function(e){var o=this,r=e[0]>>a;return gval=e[1]>>a,bval=e[2]>>a,r>=o.r1&&r<=o.r2&&gval>=o.g1&&gval<=o.g2&&bval>=o.b1&&bval<=o.b2}},y.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var o=this.vboxes,r=0;r<o.size();r++)if(o.peek(r).vbox.contains(e))return o.peek(r).color;return this.nearest(e)},nearest:function(e){for(var o,r,u,n=this.vboxes,t=0;t<n.size();t++)((r=Math.sqrt(Math.pow(e[0]-n.peek(t).color[0],2)+Math.pow(e[1]-n.peek(t).color[1],2)+Math.pow(e[2]-n.peek(t).color[2],2)))<o||o===void 0)&&(o=r,u=n.peek(t).color);return u},forcebw:function(){var e=this.vboxes;e.sort(function(n,t){return b.naturalOrder(b.sum(n.color),b.sum(t.color))});var o=e[0].color;o[0]<5&&o[1]<5&&o[2]<5&&(e[0].color=[0,0,0]);var r=e.length-1,u=e[r].color;u[0]>251&&u[1]>251&&u[2]>251&&(e[r].color=[255,255,255])}},{quantize:function(e,o){if(!e.length||o<2||o>256)return!1;var r=function(c){var d,v=new Array(1<<3*s);return c.forEach(function(_){d=p(_[0]>>a,_[1]>>a,_[2]>>a),v[d]=(v[d]||0)+1}),v}(e);r.forEach(function(){});var u=function(c,d){var v,_,C,A=1e6,E=0,F=1e6,q=0,x=1e6,k=0;return c.forEach(function(I){(v=I[0]>>a)<A?A=v:v>E&&(E=v),(_=I[1]>>a)<F?F=_:_>q&&(q=_),(C=I[2]>>a)<x?x=C:C>k&&(k=C)}),new g(A,E,F,q,x,k,d)}(e,r),n=new h(function(c,d){return b.naturalOrder(c.count(),d.count())});function t(c,d){for(var v,_=c.size(),C=0;C<m;){if(_>=d||C++>m)return;if((v=c.pop()).count()){var A=D(r,v),E=A[0],F=A[1];if(!E)return;c.push(E),F&&(c.push(F),_++)}else c.push(v),C++}}n.push(u),t(n,.75*o);for(var f=new h(function(c,d){return b.naturalOrder(c.count()*c.volume(),d.count()*d.volume())});n.size();)f.push(n.pop());t(f,o);for(var l=new y;f.size();)l.push(f.pop());return l}}}().quantize,z=function(s){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=s.naturalWidth,this.height=this.canvas.height=s.naturalHeight,this.context.drawImage(s,0,0,this.width,this.height)};z.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var w=function(){};return w.prototype.getColor=function(s,a){return a===void 0&&(a=10),this.getPalette(s,5,a)[0]},w.prototype.getPalette=function(s,a,m){var p=function(D){var e=D.colorCount,o=D.quality;if(e!==void 0&&Number.isInteger(e)){if(e===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");e=Math.max(e,2),e=Math.min(e,20)}else e=10;return(o===void 0||!Number.isInteger(o)||o<1)&&(o=10),{colorCount:e,quality:o}}({colorCount:a,quality:m}),h=new z(s),g=function(D,e,o){for(var r,u,n,t,f,l=D,c=[],d=0;d<e;d+=o)u=l[0+(r=4*d)],n=l[r+1],t=l[r+2],((f=l[r+3])===void 0||f>=125)&&(u>250&&n>250&&t>250||c.push([u,n,t]));return c}(h.getImageData().data,h.width*h.height,p.quality),y=T(g,p.colorCount);return y?y.palette():null},w.prototype.getColorFromUrl=function(s,a,m){var p=this,h=document.createElement("img");h.addEventListener("load",function(){var g=p.getPalette(h,5,m);a(g[0],s)}),h.src=s},w.prototype.getImageData=function(s,a){var m=new XMLHttpRequest;m.open("GET",s,!0),m.responseType="arraybuffer",m.onload=function(){if(this.status==200){var p=new Uint8Array(this.response);i=p.length;for(var h=new Array(i),g=0;g<p.length;g++)h[g]=String.fromCharCode(p[g]);var y=h.join(""),D=window.btoa(y);a("data:image/png;base64,"+D)}},m.send()},w.prototype.getColorAsync=function(s,a,m){var p=this;this.getImageData(s,function(h){var g=document.createElement("img");g.addEventListener("load",function(){var y=p.getPalette(g,5,m);a(y[0],this)}),g.src=h})},w});const J={class:"grid"},W={class:"item"},X=["src","onMouseenter"],K={__name:"bgFollowImg",setup(b){V(p=>({35205969:w.value}));const T=[];for(let p=0;p<4;p++)T.push(`https://picsum.photos/200?r=${p}`);const z=new ColorThief,w=N("#fff"),s=N(-1),a=async(p,h)=>{s.value=h;const g=await z.getPalette(p.target,3),[y,D,e]=g.map(o=>`rgb(${o[0]},${o[1]},${o[2]})`);w.value=`${y},${D},${e}`},m=()=>{s.value=-1,w.value="#fff"};return(p,h)=>($(),j("div",J,[($(),j(B,null,H(T,(g,y)=>M("div",W,[M("img",{crossorigin:"anonymous",src:g,onMouseenter:D=>a(D,y),onMouseleave:m,class:L([s.value===y?"hoverImg":""]),style:R({opacity:s.value===-1||y===s.value?1:.2,transition:".3s"})},null,46,X)])),64))]))}},Q=S(K,[["__scopeId","data-v-d4b92961"]]),Y=M("h1",{id:"\u6742\u4E03\u6742\u516B\u7CFB\u5217\u4E00",tabindex:"-1"},[O("\u6742\u4E03\u6742\u516B\u7CFB\u5217\u4E00 "),M("a",{class:"header-anchor",href:"#\u6742\u4E03\u6742\u516B\u7CFB\u5217\u4E00","aria-hidden":"true"},"#")],-1),Z=M("h2",{id:"_1-\u8DDF\u968F\u56FE\u7247\u53D8\u5316\u7684\u80CC\u666F\u8272",tabindex:"-1"},[O("1. \u8DDF\u968F\u56FE\u7247\u53D8\u5316\u7684\u80CC\u666F\u8272 "),M("a",{class:"header-anchor",href:"#_1-\u8DDF\u968F\u56FE\u7247\u53D8\u5316\u7684\u80CC\u666F\u8272","aria-hidden":"true"},"#")],-1),oo=M("p",null,[O("\u56E0\u4E3A\u7EC4\u4EF6\u4E2D\u4F7F\u7528\u4E86 cdn \u5F15\u5165\u7684\u65B9\u5F0F\uFF0C\u6253\u5305\u9519\u8BEF\uFF0C\u7EC4\u4EF6\u5730\u5740\u4E3A "),M("code",null,"./components/bgFollowImg.vue")],-1),eo=G(`<div class="tip custom-block"><p class="custom-block-title">TIP</p><ol><li><p>\u901A\u8FC7 cdn \u5F15\u5165 <code>colorThief</code>\uFF0C<code>import &quot;https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.4.0/color-thief.min.js&quot;</code></p><ul><li>\u6216\u8005 <code>npm i colorthief </code></li></ul></li><li><p>\u901A\u8FC7 <code>https://picsum.photos</code> \u7F51\u5740\u83B7\u53D6\u968F\u673A\u56FE\u7247\uFF0C\u901A\u8FC7 <code>colorThief</code> \u83B7\u53D6\u989C\u8272\u7684\u8BDD\u4F1A\u6709<strong>\u8DE8\u57DF\u6C61\u67D3\uFF08\u56E0\u4E3A\u91CC\u9762\u4F7F\u7528\u4E86 canvas\uFF0C\u4F1A\u6C61\u67D3\u753B\u5E03\uFF09</strong>\uFF0C\u5728<code>img</code>\u6807\u7B7E\u4E0A\u8BBE\u7F6E <code>crossorigin=&quot;anonymous&quot;</code>\u89E3\u51B3</p></li><li><p><code>colorThief</code>\u4F7F\u7528</p></li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//\u521B\u5EFA\u4E00\u4E2A ColorThief \u7684\u5B9E\u4F8B\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> colorThief </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ColorThief</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 1. \u5F97\u5230\u56FE\u7247\u7684\u8C03\u8272\u76D8\uFF08\u53EA\u5F97\u5230\u524D\u4E09\u79CD\u4E3B\u8981\u989C\u8272\uFF09</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> colors </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> colorThief</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPalette</span><span style="color:#A6ACCD;">(e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 2. \u53EA\u5F97\u5230\u4E3B\u8981\u989C\u8272</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> mainColor </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> colorThief</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getColor</span><span style="color:#A6ACCD;">(e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">target)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div></div>`,1),ro=JSON.parse('{"title":"\u6742\u4E03\u6742\u516B\u7CFB\u5217\u4E00","description":"","frontmatter":{},"headers":[{"level":2,"title":"1. \u8DDF\u968F\u56FE\u7247\u53D8\u5316\u7684\u80CC\u666F\u8272","slug":"_1-\u8DDF\u968F\u56FE\u7247\u53D8\u5316\u7684\u80CC\u666F\u8272","link":"#_1-\u8DDF\u968F\u56FE\u7247\u53D8\u5316\u7684\u80CC\u666F\u8272","children":[]}],"relativePath":"pages/lotsOfDifferent/demo1/index.md"}'),to={name:"pages/lotsOfDifferent/demo1/index.md"},so=Object.assign(to,{setup(b){return(T,z)=>($(),j("div",null,[Y,Z,oo,U(Q),eo]))}});export{ro as __pageData,so as default};
