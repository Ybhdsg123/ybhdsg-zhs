import{_ as z,aj as O,p as S,c as M,o as N,F as L,B as R,j as T,N as $,n as U,G as X,ag as H,a as V}from"./chunks/framework.By2cXeI6.js";(function(m,_){typeof exports=="object"&&typeof module<"u"?module.exports=_():typeof define=="function"&&define.amd?define(_):(m||(typeof globalThis<"u"?globalThis:this)).ColorThief=_()})(typeof globalThis<"u"?globalThis:void 0,function(){if(!m)var m={map:function(h,l){var y={};return l?h.map(function(o,E){return y.index=E,l.call(y,o)}):h.slice()},naturalOrder:function(h,l){return h<l?-1:h>l?1:0},sum:function(h,l){var y={};return h.reduce(l?function(o,E,u){return y.index=u,o+l.call(y,E)}:function(o,E){return o+E},0)},max:function(h,l){return Math.max.apply(null,l?m.map(h,l):h)}};var _=function(){var h=5,l=8-h,y=1e3;function o(a,s,e){return(a<<2*h)+(s<<h)+e}function E(a){var s=[],e=!1;function r(){s.sort(a),e=!0}return{push:function(t){s.push(t),e=!1},peek:function(t){return e||r(),t===void 0&&(t=s.length-1),s[t]},pop:function(){return e||r(),s.pop()},size:function(){return s.length},map:function(t){return s.map(t)},debug:function(){return e||r(),s}}}function u(a,s,e,r,t,n,d){var p=this;p.r1=a,p.r2=s,p.g1=e,p.g2=r,p.b1=t,p.b2=n,p.histo=d}function f(){this.vboxes=new E(function(a,s){return m.naturalOrder(a.vbox.count()*a.vbox.volume(),s.vbox.count()*s.vbox.volume())})}function C(a,s){if(s.count()){var e=s.r2-s.r1+1,r=s.g2-s.g1+1,t=m.max([e,r,s.b2-s.b1+1]);if(s.count()==1)return[s.copy()];var n,d,p,k,c=0,g=[],F=[];if(t==e)for(n=s.r1;n<=s.r2;n++){for(k=0,d=s.g1;d<=s.g2;d++)for(p=s.b1;p<=s.b2;p++)k+=a[o(n,d,p)]||0;g[n]=c+=k}else if(t==r)for(n=s.g1;n<=s.g2;n++){for(k=0,d=s.r1;d<=s.r2;d++)for(p=s.b1;p<=s.b2;p++)k+=a[o(d,n,p)]||0;g[n]=c+=k}else for(n=s.b1;n<=s.b2;n++){for(k=0,d=s.r1;d<=s.r2;d++)for(p=s.g1;p<=s.g2;p++)k+=a[o(d,p,n)]||0;g[n]=c+=k}return g.forEach(function(v,A){F[A]=c-v}),function(v){var A,x,D,P,B,j=v+"1",w=v+"2",I=0;for(n=s[j];n<=s[w];n++)if(g[n]>c/2){for(D=s.copy(),P=s.copy(),B=(A=n-s[j])<=(x=s[w]-n)?Math.min(s[w]-1,~~(n+x/2)):Math.max(s[j],~~(n-1-A/2));!g[B];)B++;for(I=F[B];!I&&g[B-1];)I=F[--B];return D[w]=B,P[j]=D[w]+1,[D,P]}}(t==e?"r":t==r?"g":"b")}}return u.prototype={volume:function(a){var s=this;return s._volume&&!a||(s._volume=(s.r2-s.r1+1)*(s.g2-s.g1+1)*(s.b2-s.b1+1)),s._volume},count:function(a){var s=this,e=s.histo;if(!s._count_set||a){var r,t,n,d=0;for(r=s.r1;r<=s.r2;r++)for(t=s.g1;t<=s.g2;t++)for(n=s.b1;n<=s.b2;n++)d+=e[o(r,t,n)]||0;s._count=d,s._count_set=!0}return s._count},copy:function(){var a=this;return new u(a.r1,a.r2,a.g1,a.g2,a.b1,a.b2,a.histo)},avg:function(a){var s=this,e=s.histo;if(!s._avg||a){var r,t,n,d,p=0,k=1<<8-h,c=0,g=0,F=0;for(t=s.r1;t<=s.r2;t++)for(n=s.g1;n<=s.g2;n++)for(d=s.b1;d<=s.b2;d++)p+=r=e[o(t,n,d)]||0,c+=r*(t+.5)*k,g+=r*(n+.5)*k,F+=r*(d+.5)*k;s._avg=p?[~~(c/p),~~(g/p),~~(F/p)]:[~~(k*(s.r1+s.r2+1)/2),~~(k*(s.g1+s.g2+1)/2),~~(k*(s.b1+s.b2+1)/2)]}return s._avg},contains:function(a){var s=this,e=a[0]>>l;return gval=a[1]>>l,bval=a[2]>>l,e>=s.r1&&e<=s.r2&&gval>=s.g1&&gval<=s.g2&&bval>=s.b1&&bval<=s.b2}},f.prototype={push:function(a){this.vboxes.push({vbox:a,color:a.avg()})},palette:function(){return this.vboxes.map(function(a){return a.color})},size:function(){return this.vboxes.size()},map:function(a){for(var s=this.vboxes,e=0;e<s.size();e++)if(s.peek(e).vbox.contains(a))return s.peek(e).color;return this.nearest(a)},nearest:function(a){for(var s,e,r,t=this.vboxes,n=0;n<t.size();n++)((e=Math.sqrt(Math.pow(a[0]-t.peek(n).color[0],2)+Math.pow(a[1]-t.peek(n).color[1],2)+Math.pow(a[2]-t.peek(n).color[2],2)))<s||s===void 0)&&(s=e,r=t.peek(n).color);return r},forcebw:function(){var a=this.vboxes;a.sort(function(t,n){return m.naturalOrder(m.sum(t.color),m.sum(n.color))});var s=a[0].color;s[0]<5&&s[1]<5&&s[2]<5&&(a[0].color=[0,0,0]);var e=a.length-1,r=a[e].color;r[0]>251&&r[1]>251&&r[2]>251&&(a[e].color=[255,255,255])}},{quantize:function(a,s){if(!a.length||s<2||s>256)return!1;var e=function(k){var c,g=new Array(1<<3*h);return k.forEach(function(F){c=o(F[0]>>l,F[1]>>l,F[2]>>l),g[c]=(g[c]||0)+1}),g}(a);e.forEach(function(){});var r=function(k,c){var g,F,v,A=1e6,x=0,D=1e6,P=0,B=1e6,j=0;return k.forEach(function(w){(g=w[0]>>l)<A?A=g:g>x&&(x=g),(F=w[1]>>l)<D?D=F:F>P&&(P=F),(v=w[2]>>l)<B?B=v:v>j&&(j=v)}),new u(A,x,D,P,B,j,c)}(a,e),t=new E(function(k,c){return m.naturalOrder(k.count(),c.count())});function n(k,c){for(var g,F=k.size(),v=0;v<y;){if(F>=c||v++>y)return;if((g=k.pop()).count()){var A=C(e,g),x=A[0],D=A[1];if(!x)return;k.push(x),D&&(k.push(D),F++)}else k.push(g),v++}}t.push(r),n(t,.75*s);for(var d=new E(function(k,c){return m.naturalOrder(k.count()*k.volume(),c.count()*c.volume())});t.size();)d.push(t.pop());n(d,s);for(var p=new f;d.size();)p.push(d.pop());return p}}}().quantize,b=function(h){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=h.naturalWidth,this.height=this.canvas.height=h.naturalHeight,this.context.drawImage(h,0,0,this.width,this.height)};b.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var q=function(){};return q.prototype.getColor=function(h,l){return l===void 0&&(l=10),this.getPalette(h,5,l)[0]},q.prototype.getPalette=function(h,l,y){var o=function(C){var a=C.colorCount,s=C.quality;if(a!==void 0&&Number.isInteger(a)){if(a===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");a=Math.max(a,2),a=Math.min(a,20)}else a=10;return(s===void 0||!Number.isInteger(s)||s<1)&&(s=10),{colorCount:a,quality:s}}({colorCount:l,quality:y}),E=new b(h),u=function(C,a,s){for(var e,r,t,n,d,p=C,k=[],c=0;c<a;c+=s)r=p[0+(e=4*c)],t=p[e+1],n=p[e+2],((d=p[e+3])===void 0||d>=125)&&(r>250&&t>250&&n>250||k.push([r,t,n]));return k}(E.getImageData().data,E.width*E.height,o.quality),f=_(u,o.colorCount);return f?f.palette():null},q.prototype.getColorFromUrl=function(h,l,y){var o=this,E=document.createElement("img");E.addEventListener("load",function(){var u=o.getPalette(E,5,y);l(u[0],h)}),E.src=h},q.prototype.getImageData=function(h,l){var y=new XMLHttpRequest;y.open("GET",h,!0),y.responseType="arraybuffer",y.onload=function(){if(this.status==200){var o=new Uint8Array(this.response);i=o.length;for(var E=new Array(i),u=0;u<o.length;u++)E[u]=String.fromCharCode(o[u]);var f=E.join(""),C=window.btoa(f);l("data:image/png;base64,"+C)}},y.send()},q.prototype.getColorAsync=function(h,l,y){var o=this;this.getImageData(h,function(E){var u=document.createElement("img");u.addEventListener("load",function(){var f=o.getPalette(u,5,y);l(f[0],this)}),u.src=E})},q});const J={class:"grid"},G={class:"item"},W=["src","onMouseenter"],K={__name:"bgFollowImg",setup(m){O(o=>({v01939464:q.value}));const _=[];for(let o=0;o<4;o++)_.push(`https://picsum.photos/200?r=${o}`);const b=new ColorThief,q=S("#fff"),h=S(-1),l=async(o,E)=>{h.value=E;const u=await b.getPalette(o.target,3),[f,C,a]=u.map(s=>`rgb(${s[0]},${s[1]},${s[2]})`);q.value=`${f},${C},${a}`},y=()=>{h.value=-1,q.value="#fff"};return(o,E)=>(N(),M("div",J,[(N(),M(L,null,R(_,(u,f)=>T("div",G,[T("img",{crossorigin:"anonymous",src:u,onMouseenter:C=>l(C,f),onMouseleave:y,class:U([h.value===f?"hoverImg":""]),style:$({opacity:h.value===-1||f===h.value?1:.2,transition:".3s"})},null,46,W)])),64))]))}},Q=z(K,[["__scopeId","data-v-c3feddc8"]]),ss=JSON.parse('{"title":"系列一 —— 杂七杂八","description":"","frontmatter":{},"headers":[],"relativePath":"pages/lotsOfDifferent/demo1/index.md","filePath":"pages/lotsOfDifferent/demo1/index.md"}'),Y={name:"pages/lotsOfDifferent/demo1/index.md"},is=Object.assign(Y,{setup(m){return(_,b)=>(N(),M("div",null,[b[0]||(b[0]=T("h1",{id:"系列一-——-杂七杂八",tabindex:"-1"},[V("系列一 —— 杂七杂八 "),T("a",{class:"header-anchor",href:"#系列一-——-杂七杂八","aria-label":'Permalink to "系列一 —— 杂七杂八"'},"​")],-1)),b[1]||(b[1]=T("h2",{id:"_1-跟随图片变化的背景色",tabindex:"-1"},[V("1. 跟随图片变化的背景色 "),T("a",{class:"header-anchor",href:"#_1-跟随图片变化的背景色","aria-label":'Permalink to "1. 跟随图片变化的背景色"'},"​")],-1)),b[2]||(b[2]=T("p",null,"通过 cdn 引入第三方包的方式，在打包时因为 ESM 不支持，所以需要将文件下载下来引入",-1)),X(Q),b[3]||(b[3]=H(`<div class="tip custom-block"><p class="custom-block-title">TIP</p><ol><li><p>通过 cdn 引入 <code>colorThief</code>，<code>import &quot;https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.4.0/color-thief.min.js&quot;</code></p><ul><li>或者 <code>npm i colorthief</code></li></ul></li><li><p>通过 <code>https://picsum.photos</code> 网址获取随机图片，通过 <code>colorThief</code> 获取颜色的话会有<strong>跨域污染（因为里面使用了 canvas，会污染画布）</strong>，在<code>img</code>标签上设置 <code>crossorigin=&quot;anonymous&quot;</code>解决</p></li><li><p><code>colorThief</code>使用</p></li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//创建一个 ColorThief 的实例对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> colorThief</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ColorThief</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. 得到图片的调色盘（只得到前三种主要颜色）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> colors</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> colorThief.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPalette</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.target, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 只得到主要颜色</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mainColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> colorThief.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.target);</span></span></code></pre></div></div><h2 id="_2-纯-css-图标-anthony-fu-系列文章" tabindex="-1">2. <a href="https://antfu.me/posts/icons-in-pure-css-zh" target="_blank" rel="noreferrer">纯 CSS 图标 (Anthony Fu 系列文章)</a> <a class="header-anchor" href="#_2-纯-css-图标-anthony-fu-系列文章" aria-label="Permalink to &quot;2. [纯 CSS 图标 (Anthony Fu 系列文章)](https://antfu.me/posts/icons-in-pure-css-zh)&quot;">​</a></h2><h3 id="_2-1-图标库" tabindex="-1">2.1 图标库 <a class="header-anchor" href="#_2-1-图标库" aria-label="Permalink to &quot;2.1 图标库&quot;">​</a></h3><p><a href="https://iconify.design/" target="_blank" rel="noreferrer">Iconify</a> 一个统一的图标框架，它通过单个 CDN 条目和按需加载提供来自 80 多个流行图标集的 6,000 多个图标。</p><h3 id="_2-2-iconify-使用" tabindex="-1">2.2 Iconify 使用 <a class="header-anchor" href="#_2-2-iconify-使用" aria-label="Permalink to &quot;2.2 Iconify 使用&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Import Framework 引入</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://code.iconify.design/1/1.0.7/iconify.min.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Use an icon from Font Awesome 使用</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;iconify&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data-icon</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fa:home&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Use another icon from Material Design Icons</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;iconify&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data-icon</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mdi:flask&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="_2-3-vs-code-插件" tabindex="-1">2.3 VS Code 插件 <a class="header-anchor" href="#_2-3-vs-code-插件" aria-label="Permalink to &quot;2.3 VS Code 插件&quot;">​</a></h3><p>Iconify IntelliSense（加载图标数据并按需缓存它们，它将 svgs 编码为数据 url，以便在 VS Code 中显示为图像。）</p><h3 id="_2-4-icons-插件相关" tabindex="-1">2.4 -icons 插件相关 <a class="header-anchor" href="#_2-4-icons-插件相关" aria-label="Permalink to &quot;2.4 -icons 插件相关&quot;">​</a></h3><ul><li><p><a href="https://www.npmjs.com/package/unplugin-icons" target="_blank" rel="noreferrer">unplugin-icons - npm 网站</a></p></li><li><p><a href="https://blog.csdn.net/CRMEB/article/details/123245221" target="_blank" rel="noreferrer">unplugin-icons 按需访问数千个图标作为组件</a></p></li><li><p><a href="https://github.com/unjs/unplugin" target="_blank" rel="noreferrer">unjs/unplugin - Vite、Rollup、Webpack 等的统一插件系统</a></p></li><li><p><a href="https://github.com/unplugin/unplugin-vue-components" target="_blank" rel="noreferrer">unplugin-vue-components - 按需组件自动导入</a></p></li><li><p><a href="https://github.com/unplugin/unplugin-auto-import" target="_blank" rel="noreferrer">unplugin-auto-import - 按需自动导入 API</a></p></li><li><p><a href="https://antfu.me/posts/journey-with-icons-continues" target="_blank" rel="noreferrer">更多请查看...</a></p></li></ul><h2 id="_3-vue中img标签引入图片时-需要使用require-图片地址" tabindex="-1">3. vue中img标签引入图片时，需要使用<code>require(&#39;图片地址&#39;)</code> <a class="header-anchor" href="#_3-vue中img标签引入图片时-需要使用require-图片地址" aria-label="Permalink to &quot;3. vue中img标签引入图片时，需要使用\`require(&#39;图片地址&#39;)\`&quot;">​</a></h2><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:src=&quot;require(&#39;@/assets/images/hotel/zsr.png&#39;)&quot;</span></span></code></pre></div><h2 id="_4-array-includes-在进行比较时使用的是强等于-比较" tabindex="-1">4. Array.includes() 在进行比较时使用的是强等于（===）比较 <a class="header-anchor" href="#_4-array-includes-在进行比较时使用的是强等于-比较" aria-label="Permalink to &quot;4. Array.includes() 在进行比较时使用的是强等于（===）比较&quot;">​</a></h2><h2 id="_5-md5-加密文件和使用" tabindex="-1">5. MD5 加密文件和使用 <a class="header-anchor" href="#_5-md5-加密文件和使用" aria-label="Permalink to &quot;5. MD5 加密文件和使用&quot;">​</a></h2><h3 id="_5-1-文件地址-utils-md5-js" tabindex="-1">5.1 文件地址：<code>./utils/md5.js</code> <a class="header-anchor" href="#_5-1-文件地址-utils-md5-js" aria-label="Permalink to &quot;5.1 文件地址：\`./utils/md5.js\`&quot;">​</a></h3><h3 id="_5-2-使用方法" tabindex="-1">5.2 使用方法 <a class="header-anchor" href="#_5-2-使用方法" aria-label="Permalink to &quot;5.2 使用方法&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> md5 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./utils/md5.js&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> hex_md5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dvjhkl1234567890&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="_6-如何中断foreach" tabindex="-1">6. 如何中断<code>forEach</code> <a class="header-anchor" href="#_6-如何中断foreach" aria-label="Permalink to &quot;6. 如何中断\`forEach\`&quot;">​</a></h2><h3 id="_6-1-理解foreach" tabindex="-1">6.1 理解<code>forEach</code> <a class="header-anchor" href="#_6-1-理解foreach" aria-label="Permalink to &quot;6.1 理解\`forEach\`&quot;">​</a></h3><ul><li><code>JavaScript</code> 中的 <code>forEach</code> 方法用于遍历数组。<strong>它对数组中的每个元素执行一次回调函数</strong>。然而，与传统的 <code>for</code> 或 <code>while</code> 循环不同，<code>forEach</code> 被设计为在没有内置机制的情况下，为每个元素执行函数，<strong>无法提前停止或中断循环</strong>。</li></ul><h3 id="_6-2-使用-break-中断foreach" tabindex="-1">6.2 使用 <code>break</code> 中断<code>forEach</code> <a class="header-anchor" href="#_6-2-使用-break-中断foreach" aria-label="Permalink to &quot;6.2 使用 \`break\` 中断\`forEach\`&quot;">​</a></h3><ul><li>如果尝试在 <code>forEach</code> 中使用 <code>break</code>，你会遇到语法错误，<strong>因为 <code>break</code> 在回调函数内不适用</strong></li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> numbers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numbers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">number</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (number </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Syntax Error: Illegal break statement  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(number);  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_6-3-使用-return-中断foreach" tabindex="-1">6.3 使用 <code>return</code> 中断<code>forEach</code> <a class="header-anchor" href="#_6-3-使用-return-中断foreach" aria-label="Permalink to &quot;6.3 使用 \`return\` 中断\`forEach\`&quot;">​</a></h3><ul><li>在<code>forEach</code> 中，<code>return</code> 并不能中断循环。相反，<strong>它仅仅退出当前回调函数的迭代，然后继续处理数组中的下一个元素</strong>。</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> numbers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numbers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">number</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (number </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Exits only the current iteration  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }  </span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(number);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1,2,4,5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_6-4-使用异常中断-foreach-循环" tabindex="-1">6.4 使用异常中断 <code>forEach</code> 循环 <a class="header-anchor" href="#_6-4-使用异常中断-foreach-循环" aria-label="Permalink to &quot;6.4 使用异常中断 \`forEach\` 循环&quot;">​</a></h3><ul><li>通过抛出异常技术上可以中断 <code>forEach</code> 循环。<strong>通常不建议使用</strong>，因为它对代码的可读性和错误处理有影响，但它可以有效地停止循环。。</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> numbers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    numbers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">number</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (number </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Loop stopped&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(number);  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     });  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e) {  </span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Loop was stopped due to an exception.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Output: 1, 2, 3, Loop was stopped due to an exception.</span></span></code></pre></div><h2 id="_7-打开新页签-防止恶意网站重定向你的网站地址" tabindex="-1">7. 打开新页签(防止恶意网站重定向你的网站地址) <a class="header-anchor" href="#_7-打开新页签-防止恶意网站重定向你的网站地址" aria-label="Permalink to &quot;7. 打开新页签(防止恶意网站重定向你的网站地址)&quot;">​</a></h2><ul><li>如果要打开外链，建议将 <code>rel</code>设置为 <code>noopener noreferrer</code>，避免一些恶意网站通过 <code>window.opener.location</code> 重定向你的网站地址。<code>window.open</code> 方法同理。</li><li><a href="https://www.cnblogs.com/never404/p/15723254.html" target="_blank" rel="noreferrer">相关文章链接</a></li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 高版本浏览器 rel 默认为 noopener，不过建议显示设置，兼容低版本。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> target</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;_blank&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;noopener noreferrer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// window.open rel 默认为 opener，需要自己设置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://baidu.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;baidu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;noopener,noreferrer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 以下有安全漏洞，打开的新页签可以通过 window.opener.location 重定向你的网站</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> target</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;_blank&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;opener&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.opener.location </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;http://fake.website.here&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="_8-version-rocket-一个用于-web-应用版本检测和部署通知的工具库。" tabindex="-1">8. <a href="https://github.com/guMcrey/version-rocket/blob/main/README.zh-CN.md#%E5%AE%89%E8%A3%85" target="_blank" rel="noreferrer">version-rocket</a> 一个用于 web 应用版本检测和部署通知的工具库。 <a class="header-anchor" href="#_8-version-rocket-一个用于-web-应用版本检测和部署通知的工具库。" aria-label="Permalink to &quot;8. [version-rocket](https://github.com/guMcrey/version-rocket/blob/main/README.zh-CN.md#%E5%AE%89%E8%A3%85) 一个用于 web 应用版本检测和部署通知的工具库。&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><ol><li>看官网操作步骤直接设置好就ok了，打包时后面加上 <code>set EXTERNAL=some text &amp;&amp; generate-version-file</code></li><li>本地测试的话，可以直接在 <code>public</code> 目录下放一个 <code>version.json</code> 文件，写上<code>version</code>，字段，然后和<code>package.json</code> 中的<code>version</code>比较，不同就会提示更新， <strong>注意：</strong> 放到服务端时，本地文件最好删除<code>version.json</code> 文件，因为<code>generate-version-file</code>已经自动生成了，除非你有自定义的东西</li><li>主要代码，只加下方代码后，打包就可有版本更新</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** 1. package.json */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 1. set EXTERNAL=some text 设置提示信息 用于 onVersionUpdate 自定义 UI 时</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 2. generate-version-file 生成 version.json 文件，version 默认取 package.json 的 version 字段</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build &amp;&amp; set EXTERNAL=some text &amp;&amp; generate-version-file&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build --mode test &amp;&amp; set EXTERNAL=some text &amp;&amp; generate-version-file&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;preview&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite preview&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** 2. App.vue */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 版本更新  https://github.com/guMcrey/version-rocket?tab=readme-ov-file</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { checkVersion } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;version-rocket&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 推荐使用 package.json 中的 version 字段, 也可自定义 version</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { version, name } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;../package.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onBeforeMount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 在生命周期钩子中调用 checkVersion</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VITE_NODE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VITE_NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;production&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    checkVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 5分钟检测一次版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        pollingTime: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        localPackageVersion: version,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        originVersionFileUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/version.json\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        immediate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // options</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        title: name,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;检测到新版本&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        buttonText: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;立即更新&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div></div><h2 id="_9-访问本地文件" tabindex="-1">9. 访问本地文件 <a class="header-anchor" href="#_9-访问本地文件" aria-label="Permalink to &quot;9. 访问本地文件&quot;">​</a></h2><h3 id="_9-1-使用-本地地址-访问文件内容" tabindex="-1">9.1 使用 本地地址 访问文件内容 <a class="header-anchor" href="#_9-1-使用-本地地址-访问文件内容" aria-label="Permalink to &quot;9.1 使用 本地地址 访问文件内容&quot;">​</a></h3><p>可以直接访问 <code>[本地地址][[文件名]</code> 来访问，比如<code>http://localhost:8080/version.json</code> 访问 version.json文件</p><h3 id="_9-2-方法来访问" tabindex="-1">9.2 方法来访问 <a class="header-anchor" href="#_9-2-方法来访问" aria-label="Permalink to &quot;9.2 方法来访问&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Error fetching JSON data:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_10-html快速调试样式快捷键-shift-command-ctrl-c" tabindex="-1">10. html快速调试样式快捷键 <code>Shift + Command/ctrl + C</code> <a class="header-anchor" href="#_10-html快速调试样式快捷键-shift-command-ctrl-c" aria-label="Permalink to &quot;10. html快速调试样式快捷键 \`Shift + Command/ctrl + C\`&quot;">​</a></h2>`,41))]))}});export{ss as __pageData,is as default};
